{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIGP - Sistema Jardim Primavera</title>
    <link rel="stylesheet" href="{% static 'style/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>



:root {
    
    --primary-color: #ffc107; 
    --primary-dark: #ffb300;
    --secondary-color: #343a40; 
    --secondary-dark: #212529;
    --accent-color: #ffd54f; 
    --accent-dark: #ffb300;
    
    
    --success-color: #28a745;
    --success-dark: #218838;
    --danger-color: #dc3545;
    --danger-dark: #c82333;
    --warning-color: #ffc107;
    --warning-dark: #e0a800;
    --info-color: #17a2b8;
    --info-dark: #138496;
    
    
    --light-color: #f8f9fa;
    --light-dark: #e9ecef;
    --dark-color: #343a40; 
    --dark-dark: #212529; 
    --text-color: #212529;
    --text-light: #6c757d;
    --text-dark: #000;
    --white: #ffffff;
        
    
    --gray-50: #fafafa;
    --gray-100: #f5f5f5;
    --gray-200: #eeeeee;
    --gray-300: #e0e0e0;
    --gray-400: #bdbdbd;
    --gray-500: #9e9e9e;
    --gray-600: #757575;
    --gray-700: #616161;
    --gray-800: #424242;
    --gray-850: #373737;
    --gray-900: #212121;
    
    
    --blue: #6c757d; 
    --green: #6c757d; 
    --orange: #ffc107; 
    --purple: #6c757d; 
    --red: #dc3545;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Poppins', sans-serif;
    font-size: 16px;
    line-height: 1.6;
    color: var(--text-color);
    background-color: var(--gray-100); 
    min-height: 100vh;
    display: flex;
}


.sidebar {
    width: 260px;
    height: 100vh;
    background-color: var(--gray-800); 
    color: var(--white);
    display: flex;
    flex-direction: column;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 100;
    transition: all 0.3s ease;
    border-right: 3px solid var(--primary-color); /* Borda amarela */
}

.sidebar.collapsed {
    width: 80px;
}

.main-content {
    flex: 1;
    margin-left: 260px;
    transition: all 0.3s ease;
    max-width: calc(100% - 260px);
}

.main-content.expanded {
    margin-left: 80px;
    max-width: calc(100% - 80px);
}


.logo {
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    border-bottom: 1px solid rgba(255, 193, 7, 0.3); 
    background-color: var(--gray-850);
}

.logo i {
    font-size: 24px;
    color: var(--primary-color); 
}

.logo h2 {
    font-size: 22px;
    font-weight: 600;
    color: var(--white);
}

.sidebar.collapsed .logo h2 {
    display: none;
}

nav {
    flex: 1;
    padding: 20px 0;
}

nav ul {
    list-style: none;
}

nav ul li {
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    cursor: pointer;
    transition: all 0.2s ease;
    margin-bottom: 5px;
    border-left: 3px solid transparent;
}

nav ul li:hover {
    background-color: rgba(255, 193, 7, 0.1); 
    border-left-color: var(--primary-color);
}

nav ul li.active {
    background-color: rgba(255, 193, 7, 0.2); 
    border-left-color: var(--primary-color); 
    position: relative;
}

nav ul li i {
    font-size: 18px;
    min-width: 24px;
    text-align: center;
    color: var(--gray-300);
}

nav ul li.active i {
    color: var(--primary-color); 
}

.sidebar.collapsed nav ul li span {
    display: none;
}

.sidebar-footer {
    padding: 15px 20px;
    border-top: 1px solid rgba(255, 193, 7, 0.3);
    font-size: 12px;
    background-color: var(--gray-850);
    color: var(--gray-400);
}

.sidebar.collapsed .sidebar-footer {
    text-align: center;
    padding: 15px 5px;
}

.sidebar.collapsed .sidebar-footer p:last-child {
    display: none;
}


header {
    background-color: var(--white);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    padding: 15px 30px;
    position: sticky;
    top: 0;
    z-index: 50;
    border-bottom: 2px solid var(--primary-color); 
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#menu-toggle {
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: var(--gray-600);
    padding: 8px;
    border-radius: 4px;
    transition: all 0.2s ease;
}

#menu-toggle:hover {
    background-color: rgba(255, 193, 7, 0.1);
    color: var(--primary-color);
}

.header-title h1 {
    font-size: 20px;
    font-weight: 600;
    color: var(--dark-color);
}

.current-date {
    font-size: 14px;
    color: var(--gray-600);
    background-color: var(--gray-100);
    padding: 8px 12px;
    border-radius: 20px;
    border: 1px solid var(--primary-color);
}


.content-area {
    padding: 30px;
    min-height: calc(100vh - 66px);
    background-color: var(--gray-50);
}

.page {
    display: none;
}

.page.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}


.dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    background-color: var(--white);
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    border-left: 4px solid var(--primary-color);
}

.quick-actions {
    display: flex;
    gap: 15px;
}


.dashboard-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background-color: var(--white);
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 20px;
    border-left: 4px solid var(--primary-color);
    transition: all 0.2s ease;
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.stat-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.stat-icon i {
    font-size: 24px;
    color: var(--white);
}

.stat-icon.blue {
    background-color: var(--gray-700);
}

.stat-icon.green {
    background-color: var(--gray-600);
}

.stat-icon.orange {
    background-color: var(--primary-color); 
}

.stat-icon.purple {
    background-color: var(--gray-800);
}

.stat-info h3 {
    font-size: 14px;
    color: var(--gray-600);
    margin-bottom: 5px;
    font-weight: 500;
}

.stat-info p {
    font-size: 24px;
    font-weight: 600;
    color: var(--dark-color);
}

.dashboard-tables {
    margin-top: 30px;
}


.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    background-color: var(--white);
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    border-left: 4px solid var(--primary-color);
}

.page-header h2, .dashboard-header h2 {
    font-size: 24px;
    font-weight: 600;
    color: var(--dark-color);
}


.table-container {
    background-color: var(--white);
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 30px;
    overflow-x: auto;
    border-top: 3px solid var(--primary-color);
}

.table-container h3 {
    font-size: 18px;
    margin-bottom: 15px;
    color: var(--dark-color);
    position: relative;
}

.table-container h3::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 50px;
    height: 2px;
    background-color: var(--primary-color);
}

table {
    width: 100%;
    border-collapse: collapse;
}

table th, table td {
    padding: 12px 15px;
    text-align: left;
}

table th {
    background-color: var(--gray-800);
    color: var(--white);
    font-weight: 500;
    text-transform: uppercase;
    font-size: 12px;
    letter-spacing: 0.5px;
}

table tr {
    border-bottom: 1px solid var(--gray-200);
}

table tr:last-child {
    border-bottom: none;
}

table tbody tr:hover {
    background-color: rgba(255, 193, 7, 0.05);
}


.badge {
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
    display: inline-block;
}

.badge.active {
    background-color: rgba(255, 193, 7, 0.2);
    color: var(--warning-dark);
    border: 1px solid var(--primary-color);
}

.badge.inactive {
    background-color: rgba(108, 117, 125, 0.2);
    color: var(--gray-700);
    border: 1px solid var(--gray-500);
}

.badge.present {
    background-color: rgba(40, 167, 69, 0.2);
    color: var(--success-dark);
    border: 1px solid var(--success-color);
}

.badge.absent {
    background-color: rgba(220, 53, 69, 0.2);
    color: var(--danger-dark);
    border: 1px solid var(--danger-color);
}


.btn {
    padding: 10px 15px;
    border-radius: 4px;
    border: none;
    font-weight: 500;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.2s ease;
}

.btn i {
    font-size: 14px;
}

.btn.primary {
    background-color: var(--primary-color);
    color: var(--dark-color);
    font-weight: 600;
}

.btn.primary:hover {
    background-color: var(--primary-dark);
    transform: translateY(-1px);
    box-shadow: 0 3px 8px rgba(255, 193, 7, 0.3);
}

.btn.secondary {
    background-color: var(--gray-600);
    color: var(--white);
}

.btn.secondary:hover {
    background-color: var(--gray-700);
}

.btn.danger {
    background-color: var(--danger-color);
    color: var(--white);
}

.btn.danger:hover {
    background-color: var(--danger-dark);
}

.btn.success {
    background-color: var(--success-color);
    color: var(--white);
}

.btn.success:hover {
    background-color: var(--success-dark);
}

.btn.warning {
    background-color: var(--warning-color);
    color: var(--dark-color);
    font-weight: 600;
}

.btn.warning:hover {
    background-color: var(--warning-dark);
}

.btn-icon {
    width: 36px;
    height: 36px;
    border-radius: 4px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    border: none;
    cursor: pointer;
}

.btn-icon.edit {
    background-color: rgba(255, 193, 7, 0.1);
    color: var(--primary-color);
}

.btn-icon.edit:hover {
    background-color: var(--primary-color);
    color: var(--dark-color);
}

.btn-icon.delete {
    background-color: rgba(220, 53, 69, 0.1);
    color: var(--danger-color);
}

.btn-icon.delete:hover {
    background-color: var(--danger-color);
    color: var(--white);
}

.btn-icon.view {
    background-color: rgba(108, 117, 125, 0.1);
    color: var(--gray-700);
}

.btn-icon.view:hover {
    background-color: var(--gray-700);
    color: var(--white);
}

.actions-column {
    display: flex;
    gap: 5px;
}


.search-container {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.search-container input {
    flex: 1;
    padding: 10px 15px;
    border: 1px solid var(--gray-300);
    border-radius: 4px;
    font-size: 14px;
}

.search-container input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(255, 193, 7, 0.2);
}

.filters-container {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 20px;
    background-color: var(--white);
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    border-top: 3px solid var(--primary-color);
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.filter-group label {
    font-size: 14px;
    color: var(--gray-600);
    font-weight: 500;
}

.filter-group select,
.filter-group input {
    padding: 8px 12px;
    border: 1px solid var(--gray-300);
    border-radius: 4px;
    font-size: 14px;
    min-width: 150px;
}

.filter-group select:focus,
.filter-group input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(255, 193, 7, 0.2);
}


.report-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 20px;
    background-color: var(--white);
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    border-top: 3px solid var(--primary-color);
}

.report-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.summary-card {
    background-color: var(--white);
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    padding: 20px;
    text-align: center;
    border-left: 4px solid var(--primary-color);
    transition: all 0.2s ease;
}

.summary-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.summary-card h3 {
    font-size: 16px;
    color: var(--gray-600);
    margin-bottom: 10px;
}

.summary-card p {
    font-size: 24px;
    font-weight: 600;
    color: var(--dark-color);
}


.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.5);
}

.modal.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

.modal-content {
    background-color: var(--white);
    margin: 10% auto;
    max-width: 500px;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    animation: slideDown 0.3s ease;
    border-top: 4px solid var(--primary-color);
}

@keyframes slideDown {
    from { transform: translateY(-50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.modal-header {
    padding: 15px 20px;
    border-bottom: 1px solid var(--gray-200);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: var(--gray-50);
}

.modal-header h3 {
    font-size: 18px;
    color: var(--dark-color);
}

.close {
    font-size: 24px;
    font-weight: bold;
    color: var(--gray-500);
    cursor: pointer;
    transition: all 0.2s ease;
}

.close:hover {
    color: var(--primary-color);
    transform: scale(1.1);
}

.modal-body {
    padding: 20px;
}

.modal-footer {
    padding: 15px 20px;
    border-top: 1px solid var(--gray-200);
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    background-color: var(--gray-50);
}


.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-size: 14px;
    color: var(--gray-600);
    font-weight: 500;
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid var(--gray-300);
    border-radius: 4px;
    font-size: 14px;
    font-family: 'Poppins', sans-serif;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(255, 193, 7, 0.2);
}


#toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
}

.toast {
    min-width: 300px;
    margin-bottom: 10px;
    padding: 15px 20px;
    border-radius: 4px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    display: flex;
    align-items: center;
    gap: 15px;
    animation: slideIn 0.3s ease, fadeOut 0.5s ease 2.5s forwards;
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

.toast.success {
    background-color: var(--success-color);
    color: var(--white);
    border-left: 4px solid var(--white);
}

.toast.error {
    background-color: var(--danger-color);
    color: var(--white);
    border-left: 4px solid var(--white);
}

.toast.warning {
    background-color: var(--warning-color);
    color: var(--dark-color);
    border-left: 4px solid var(--dark-color);
}

.toast.info {
    background-color: var(--info-color);
    color: var(--white);
    border-left: 4px solid var(--white);
}

.toast i {
    font-size: 20px;
}


@media (max-width: 992px) {
    .sidebar {
        width: 80px;
    }
    
    .sidebar .logo h2,
    .sidebar nav ul li span,
    .sidebar .sidebar-footer p:last-child {
        display: none;
    }
    
    .main-content {
        margin-left: 80px;
        max-width: calc(100% - 80px);
    }
    
    .dashboard-stats,
    .report-summary {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
}

@media (max-width: 768px) {
    .content-area {
        padding: 20px;
    }
    
    .dashboard-stats,
    .report-summary {
        grid-template-columns: 1fr;
    }
    
    .filters-container,
    .report-filters {
        flex-direction: column;
    }
    
    .modal-content {
        width: 90%;
        margin: 10% auto;
    }
    
    .table-container {
        padding: 15px 10px;
    }
    
    table th, table td {
        padding: 10px 8px;
    }
    
    .dashboard-header,
    .page-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }
    
    .quick-actions {
        justify-content: center;
    }
}


li a {
  color: white;          
  text-decoration: none;  
}

li a:hover {
  color: #dddddd;       
}






        #modal-confirmar-exclusao .modal-content {
            max-width: 450px;
            border-top: 4px solid var(--danger-color);
        }

        #modal-confirmar-exclusao .modal-header {
            background-color: #fdf2f2;
            border-bottom: 1px solid #fecaca;
        }

        #modal-confirmar-exclusao .modal-header h3 {
            color: var(--danger-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #modal-confirmar-exclusao .modal-body {
            text-align: center;
            padding: 30px 20px;
        }

        #modal-confirmar-exclusao .warning-icon {
            font-size: 48px;
            color: var(--danger-color);
            margin-bottom: 20px;
        }

        #modal-confirmar-exclusao .warning-text {
            font-size: 16px;
            color: var(--text-color);
            margin-bottom: 10px;
            font-weight: 500;
        }

        #modal-confirmar-exclusao .area-name {
            font-weight: 600;
            color: var(--danger-color);
            font-size: 18px;
            margin: 15px 0;
            padding: 10px;
            background-color: #fef2f2;
            border-radius: 4px;
            border: 1px solid #fecaca;
        }

        #modal-confirmar-exclusao .permanent-warning {
            font-size: 14px;
            color: var(--text-light);
            font-style: italic;
            margin-top: 15px;
        }

        #modal-confirmar-exclusao .modal-footer {
            background-color: #fdf2f2;
            justify-content: center;
            gap: 15px;
        }

        .btn.confirm-delete {
            background-color: var(--danger-color);
            color: var(--white);
            font-weight: 600;
            padding: 12px 24px;
        }

        .btn.confirm-delete:hover {
            background-color: var(--danger-dark);
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(220, 53, 69, 0.3);
        }

        .btn.cancel-delete {
            background-color: var(--gray-500);
            color: var(--white);
            padding: 12px 24px;
        }

        .btn.cancel-delete:hover {
            background-color: var(--gray-600);
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-user-graduate"></i>
            <h2>SIGP</h2>
        </div>
        <nav>
            <ul>
                <li class="active" data-page="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </li>     
                <li data-page="areas">
                    <i class="fas fa-briefcase"></i>
                    <span>Setores</span>
                </li>
                <li data-page="funcionarios">
                    <i class="fas fa-users"></i>
                    <span>Funcionários</span>
                </li>  
                <li data-page="presencas">
                    <i class="fas fa-clipboard-check"></i>
                    <span>Controle de Ponto</span>
                </li>
                <li data-page="relatorios">
                    <i class="fas fa-chart-bar"></i>
                    <span>Relatórios</span>
                </li>
                <li data-page="">
                    <a href="{% url 'calculadora_horas' %}">
                        <i class="fas fa-calculator"></i>
                        <span>Calculadora de Horas</span>
                    </a>
                </li>
            </ul>
        </nav>
        <div class="sidebar-footer">
            <p>Sistema Jardim Primavera</p>
            <p>v1.0.0</p>
        </div>
    </div>
              
    <div class="main-content">
        <header>
            <div class="header-content">
                <button id="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="header-title">
                    <h1>Sistema de Gestão - Jardim Primavera</h1>
                </div>
                <div class="current-date">
                    <span id="today-date"></span>
                </div>
            </div>
        </header>

        <div class="content-area">
            
            <div id="dashboard" class="page active">
                <div class="dashboard-header">
                    <h2>Dashboard</h2>
                    <div class="quick-actions">
                        <button id="btn-registrar-entrada" class="btn primary"><i class="fas fa-sign-in-alt"></i> Registrar Entrada</button>
                        <button id="btn-registrar-saida" class="btn secondary"><i class="fas fa-sign-out-alt"></i> Registrar Saída</button>
                    </div>
                </div>

                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Total de Funcionários</h3>
                            <p id="total-estagiarios">Carregando...</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Presentes Hoje</h3>
                            <p id="presentes-hoje">Carregando...</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Presenças do Mês</h3>
                            <p id="presencas-mes">Carregando...</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon purple">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Horas Totais do Mês</h3>
                            <p id="horas-mes">Carregando...</p>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-tables">
                    <div class="table-container">
                        <h3>Presenças de Hoje</h3>
                        <table id="presencas-hoje-tabela">
                            <thead>
                                <tr>
                                    <th>Funcionário</th>
                                    <th>Entrada</th>
                                    <th>Saída</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                               
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="areas" class="page">
                <div class="page-header">
                    <h2>Gerenciar Setores</h2>
                    <button id="btn-nova-area" class="btn primary"><i class="fas fa-plus"></i> Novo Setor</button>
                </div>

                <div class="search-container">
                    <input type="text" id="search-area" placeholder="Buscar setor...">
                    <button class="btn secondary"><i class="fas fa-search"></i></button>
                </div>

                <div class="table-container">
                    <table id="areas-tabela">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Descrição</th>
                                <th>Número de Funcionários</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Exemplos de setores -->
                            <tr>
                                <td>1</td>
                                <td>Tecnologia</td>
                                <td>Setor responsável por desenvolvimento e inovação tecnológica</td>
                                <td>8</td>
                                <td class="actions-column">
                                    <button class="btn-icon edit" title="Editar">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-icon delete" onclick="confirmarExclusaoArea(1, 'Tecnologia')" title="Excluir">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Programação</td>
                                <td>Setor de desenvolvimento de software e aplicações</td>
                                <td>6</td>
                                <td class="actions-column">
                                    <button class="btn-icon edit" title="Editar">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-icon delete" onclick="confirmarExclusaoArea(2, 'Programação')" title="Excluir">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Design</td>
                                <td>Setor de criação visual e experiência do usuário</td>
                                <td>4</td>
                                <td class="actions-column">
                                    <button class="btn-icon edit" title="Editar">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-icon delete" onclick="confirmarExclusaoArea(3, 'Design')" title="Excluir">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Infraestrutura</td>
                                <td>Setor de manutenção e gestão de infraestrutura de TI</td>
                                <td>3</td>
                                <td class="actions-column">
                                    <button class="btn-icon edit" title="Editar">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-icon delete" onclick="confirmarExclusaoArea(4, 'Infraestrutura')" title="Excluir">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Cybersegurança</td>
                                <td>Setor de segurança da informação e proteção de dados</td>
                                <td>2</td>
                                <td class="actions-column">
                                    <button class="btn-icon edit" title="Editar">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-icon delete" onclick="confirmarExclusaoArea(5, 'Cybersegurança')" title="Excluir">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

       
            <div id="funcionarios" class="page">
                <div class="page-header">
                    <h2>Gerenciar Funcionários</h2>
                    <button id="btn-novo-estagiario" class="btn primary"><i class="fas fa-plus"></i> Novo Funcionário</button>
                </div>

                <div class="search-container">
                    <input type="text" id="search-estagiario" placeholder="Buscar funcionário...">
                    <button class="btn secondary"><i class="fas fa-search"></i></button>
                </div>

                <div class="table-container">
                    <table id="estagiarios-tabela">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Setor</th>
                                <th>Email</th>
                                <th>Telefone</th>
                                <th>Data Início</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                   
                        </tbody>
                    </table>
                </div>
            </div>

           
            <div id="presencas" class="page">
                <div class="page-header">
                    <h2>Controle de Ponto</h2>
                    <button id="btn-nova-presenca" class="btn primary"><i class="fas fa-plus"></i> Novo Registro</button>
                </div>

                <div class="filters-container">
                    <div class="filter-group">
                        <label for="filtro-estagiario">Funcionário:</label>
                        <select id="filtro-estagiario">
                            <option value="">Todos</option>
                            
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filtro-data-inicio">Data Início:</label>
                        <input type="date" id="filtro-data-inicio">
                    </div>
                    <div class="filter-group">
                        <label for="filtro-data-fim">Data Fim:</label>
                        <input type="date" id="filtro-data-fim">
                    </div>
                    <button id="btn-filtrar-presencas" class="btn secondary"><i class="fas fa-filter"></i> Filtrar</button>
                </div>

                <div class="table-container">
                    <table id="presencas-tabela">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Funcionário</th>
                                <th>Data</th>
                                <th>Entrada</th>
                                <th>Saída</th>
                                <th>Horas</th>
                                <th>Observação</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                        </tbody>
                    </table>
                </div>
            </div>

        
            <div id="relatorios" class="page">
                <div class="page-header">
                    <h2>Relatórios</h2>
                </div>

                <div class="report-filters">
                    <div class="filter-group">
                        <label for="relatorio-mes">Mês:</label>
                        <select id="relatorio-mes">
                            <option value="1">Janeiro</option>
                            <option value="2">Fevereiro</option>
                            <option value="3">Março</option>
                            <option value="4">Abril</option>
                            <option value="5">Maio</option>
                            <option value="6">Junho</option>
                            <option value="7">Julho</option>
                            <option value="8">Agosto</option>
                            <option value="9">Setembro</option>
                            <option value="10">Outubro</option>
                            <option value="11">Novembro</option>
                            <option value="12">Dezembro</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="relatorio-ano">Ano:</label>
                        <input type="number" id="relatorio-ano" min="2020" max="2030">
                    </div>
                    <button id="btn-gerar-relatorio" class="btn primary"><i class="fas fa-file-alt"></i> Gerar Relatório</button>
                    <button id="btn-exportar-relatorio" class="btn secondary"><i class="fas fa-download"></i> Exportar</button>
                </div>

                <div class="report-container">
                    <div class="report-summary">
                        <div class="summary-card">
                            <h3>Total de Presenças</h3>
                            <p id="relatorio-total-presencas">-</p>
                        </div>
                        <div class="summary-card">
                            <h3>Média de Horas por Dia</h3>
                            <p id="relatorio-media-horas">-</p>
                        </div>
                        <div class="summary-card">
                            <h3>Total de Horas</h3>
                            <p id="relatorio-total-horas">-</p>
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="relatorio-tabela">
                            <thead>
                                <tr>
                                    <th>Funcionário</th>
                                    <th>Total de Presenças</th>
                                    <th>Total de Horas</th>
                                    <th>Média Diária</th>
                                </tr>
                            </thead>
                            <tbody>
                        
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <div id="modal-confirmar-exclusao" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>
                    <i class="fas fa-exclamation-triangle"></i>
                    Confirmar Exclusão
                </h3>
                <span class="close" onclick="fecharModalConfirmacao()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="warning-icon">
                    <i class="fas fa-trash-alt"></i>
                </div>
                <div class="warning-text">
                    Tem certeza que deseja excluir o setor:
                </div>
                <div id="area-nome-exclusao" class="area-name">
                    <!-- Nome da área será inserido aqui -->
                </div>
                <div class="permanent-warning">
                    <strong>Atenção:</strong> Esta ação é permanente e não pode ser desfeita.
                </div>
            </div>
            <div class="modal-footer">
                <button id="btn-confirmar-exclusao" class="btn confirm-delete">
                    <i class="fas fa-trash"></i>
                    Sim, Excluir Permanentemente
                </button>
                <button class="btn cancel-delete" onclick="fecharModalConfirmacao()">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>

  
    <div id="modal-registrar-entrada" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Registrar Entrada de Funcionário</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="entrada-estagiario">Funcionário:</label>
                    <select id="entrada-estagiario" required>
                        <option value="">Selecione o funcionário</option>
                        <!--  dados no javaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="entrada-observacao">Observação:</label>
                    <textarea id="entrada-observacao" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btn-confirmar-entrada" class="btn primary">Registrar Entrada</button>
                <button class="btn secondary modal-cancel">Cancelar</button>
            </div>
        </div>
    </div>

   
    <div id="modal-registrar-saida" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Registrar Saída de Funcionário</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="saida-estagiario">Funcionário:</label>
                    <select id="saida-estagiario" required>
                        <option value="">Selecione o funcionário</option>
                        <!-- dados no javaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="saida-observacao">Observação:</label>
                    <textarea id="saida-observacao" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btn-confirmar-saida" class="btn primary">Registrar Saída</button>
                <button class="btn secondary modal-cancel">Cancelar</button>
            </div>
        </div>
    </div>

    
    <div id="modal-estagiario" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-estagiario-titulo">Novo Funcionário</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <input type="hidden" id="estagiario-id">
                <div class="form-group">
                    <label for="estagiario-nome">Nome:</label>
                    <input type="text" id="estagiario-nome" required>
                </div>
              
                <div class="form-group">
                    <label for="estagiario-email">Email:</label>
                    <input type="email" id="estagiario-email" required>
                </div>
                <div class="form-group">
                    <label for="estagiario-telefone">Telefone:</label>
                    <input type="text" id="estagiario-telefone" required>
                </div>
                <div class="form-group">
                    <label for="estagiario-data-inicio">Data de Início:</label>
                    <input type="date" id="estagiario-data-inicio" required>
                </div>  
                <div class="form-group">
                    <label for="estagiario-area">Setor:</label>
                    <select id="estagiario-area" required>
                        <option value="">Selecione o setor</option>
                        <!-- dados no javaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="estagiario-ativo">Status:</label>
                    <select id="estagiario-ativo">
                        <option value="true">Ativo</option>
                        <option value="false">Inativo</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btn-salvar-estagiario" class="btn primary">Salvar</button>
                <button class="btn secondary modal-cancel">Cancelar</button>
            </div>
        </div>
    </div>

    
    <div id="toast-container"></div>
    <script src="{% static 'js/index.js' %}"></script>
<script>
      // Sistema de Controle de Estagiários (SEICE)
// Versão 1.0.0

// Mock data para simulação do sistema
let estagiarios = []

async function fetchEstagiarios() {
    try {
        const response = await fetch('/api/estagiarios/');
        if (!response.ok) {
            throw new Error('Erro ao carregar os estagiários');
        }
        const data = await response.json();
        estagiarios = data.estagiarios; // Atualiza a lista global de estagiários
        return estagiarios;
    } catch (error) {
        console.error(error);
        showToast('Erro ao carregar os estagiários', 'error');
    }
}

let presencas = []
async function fetchPresencas() {
    try {
        const response = await fetch('/api/presencas/');
        if (!response.ok) {
            throw new Error('Erro ao carregar as presenças');
        }
        const data = await response.json();
        presencas = data.presencas; // Atualiza a lista global de presenças
        console.log('Presenças carregadas:', presencas); // Depuração
        return presencas;
    } catch (error) {
        console.error(error);
        showToast('Erro ao carregar as presenças', 'error');
    }
}

let areas = [];
async function fetchAreas() {
    try {
        const response = await fetch('/api/areas/');
        if (!response.ok) throw new Error('Erro ao carregar as áreas');
        const data = await response.json();
        areas = data.areas || data; // Ajuste conforme resposta da API
        return areas;
    } catch (error) {
        console.error(error);
        showToast('Erro ao carregar as áreas', 'error');
    }
}


let presencasHoje = [];


const hoje = new Date();
const dataAtual = hoje.toISOString().split('T')[0];
const dataHojeFormatada = formatarData(dataAtual);


const dataHojeEl = document.getElementById('today-date');
dataHojeEl.textContent = dataHojeFormatada;


const navItems = document.querySelectorAll('.sidebar nav ul li');
const pages = document.querySelectorAll('.page');


document.addEventListener('DOMContentLoaded', function() {
    initNavigation();
    initMenuToggle();
    initModals();
    initTodayPresences();
    fetchPresencas().then(() => {
        initTodayPresences();
        loadDashboardStats();
        loadPresencasTable();
    });
    loadDashboardStats();
    loadEstagiarios();
    loadPresencasTable();
    initEventListeners();
    setReportDefaultDate();
});

function initNavigation() {
    navItems.forEach(item => {
        item.addEventListener('click', function() {
            navItems.forEach(navItem => navItem.classList.remove('active'));
            this.classList.add('active');
            const pageId = this.getAttribute('data-page');
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');

             if (pageId === 'areas') {
                loadAreas();
                initAreaSearch();
            }
        });
    });
}


function initMenuToggle() {
    const menuToggle = document.getElementById('menu-toggle');
    const sidebar = document.querySelector('.sidebar');
    const mainContent = document.querySelector('.main-content');
    
    menuToggle.addEventListener('click', function() {
        sidebar.classList.toggle('collapsed');
        mainContent.classList.toggle('expanded');
    });
}


function initModals() {
   
    const modals = document.querySelectorAll('.modal');
    
   
    const closeBtns = document.querySelectorAll('.close, .modal-cancel');
    
   
    document.getElementById('btn-registrar-entrada').addEventListener('click', function() {
        openModal('modal-registrar-entrada');
        loadEstagiarioSelect('entrada-estagiario', true);
    });
    
    document.getElementById('btn-registrar-saida').addEventListener('click', function() {
        openModal('modal-registrar-saida');
        loadEstagiarioSelectWithPresence('saida-estagiario');
    });
    
    document.getElementById('btn-novo-estagiario').addEventListener('click', function() {
        document.getElementById('modal-estagiario-titulo').textContent = 'Novo Estagiário';
        document.getElementById('estagiario-id').value = '';
        document.getElementById('estagiario-nome').value = '';
        document.getElementById('estagiario-area').value = '';
        document.getElementById('estagiario-email').value = '';
        document.getElementById('estagiario-telefone').value = '';
        document.getElementById('estagiario-data-inicio').value = dataAtual;
        document.getElementById('estagiario-ativo').value = 'true';
        loadAreaSelect('estagiario-area');
        openModal('modal-estagiario');
    });

    document.getElementById('btn-nova-area').addEventListener('click', function() {
        openAreaModal();
    });
    
    
    closeBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            modals.forEach(modal => {
                modal.classList.remove('active');
            });
        });
    });
    
   
    window.addEventListener('click', function(event) {
        modals.forEach(modal => {
            if (event.target == modal) {
                modal.classList.remove('active');
            }
        });
    });
}


function openModal(modalId) {
    document.getElementById(modalId).classList.add('active');
}


function loadAreas() {
    fetchAreas().then(() => {
        const tableBody = document.querySelector('#areas-tabela tbody');
        tableBody.innerHTML = '';

        if (!areas.length) {
            const row = document.createElement('tr');
            row.innerHTML = `<td colspan="5" class="text-center">Nenhuma área cadastrada.</td>`;
            tableBody.appendChild(row);
            return;
        }
        console.log('Áreas carregadas:', areas); // Depuração

        areas.forEach(area => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${area.id}</td>
                <td>${area.nome}</td>
                <td>${area.descricao || '-'}</td>
                <td>${area.total_estagiarios || 0}</td>
                <td>
                    <div class="actions-column">
                        <button class="btn-icon edit" data-id="${area.id}"><i class="fas fa-edit"></i></button>
                        <button class="btn-icon delete" data-id="${area.id}"><i class="fas fa-trash-alt"></i></button>
                    </div>
                </td>
            `;
            tableBody.appendChild(row);
        });

        document.querySelectorAll('#areas-tabela .btn-icon.edit').forEach(btn => {
            btn.addEventListener('click', function () {
                const id = parseInt(this.getAttribute('data-id'));
                editArea(id);
            });
        });
        document.querySelectorAll('#areas-tabela .btn-icon.delete').forEach(btn => {
            btn.addEventListener('click', function () {
                const id = parseInt(this.getAttribute('data-id'));
                if (confirm('Tem certeza que deseja excluir esta área?')) {
                    deleteArea(id);
                }
            });
        });
    });
}

function openAreaModal(area = null) {
    let modal = document.getElementById('modal-area');
    if (!modal) {
        modal = document.createElement('div');
        modal.id = 'modal-area';
        modal.className = 'modal';
        modal.innerHTML = `
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-area-titulo">Nova Área</h3>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="area-id">
                    <div class="form-group">
                        <label for="area-nome">Nome:</label>
                        <input type="text" id="area-nome" required>
                    </div>
                    <div class="form-group">
                        <label for="area-descricao">Descrição:</label>
                        <input type="text" id="area-descricao">
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btn-salvar-area" class="btn primary">Salvar</button>
                    <button class="btn secondary modal-cancel">Cancelar</button>
                </div>
            </div>
        `;
        document.body.appendChild(modal);

        modal.querySelector('.close').onclick = () => modal.classList.remove('active');
        modal.querySelector('.modal-cancel').onclick = () => modal.classList.remove('active');
    }

 
    document.getElementById('modal-area-titulo').textContent = area ? 'Editar Área' : 'Nova Área';
    document.getElementById('area-id').value = area ? area.id : '';
    document.getElementById('area-nome').value = area ? area.nome : '';
    document.getElementById('area-descricao').value = area ? area.descricao : '';

    document.getElementById('btn-salvar-area').onclick = salvarArea;

    modal.classList.add('active');
}

function salvarArea() {
    const id = document.getElementById('area-id').value;
    const nome = document.getElementById('area-nome').value.trim();
    const descricao = document.getElementById('area-descricao').value.trim();

    if (!nome) {
        showToast('O nome da área é obrigatório', 'error');
        return;
    }

    const area = { nome, descricao };

    let url = '/api/areas/create/';
    let method = 'POST';
    if (id) {
        method = 'PUT';
        area.id = parseInt(id);
    }

    fetch(url, {
        method,
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(area)
    })
        .then(response => {
            if (!response.ok) throw new Error('Erro ao salvar a área');
            return response.json();
        })
        .then(() => {
            showToast(id ? 'Área atualizada com sucesso!' : 'Área cadastrada com sucesso!', 'success');
            document.getElementById('modal-area').classList.remove('active');
            loadAreas();
        })
        .catch(error => {
            console.error(error);
            showToast('Erro ao salvar a área', 'error');
        });
}

function editArea(id) {
    const area = areas.find(a => a.id === id);
    if (area) openAreaModal(area);
}

function deleteArea(id) {
    fetch(`/api/areas/${id}/delete/`, { method: 'DELETE' })
        .then(response => {
            if (!response.ok) throw new Error('Erro ao excluir a área');
            showToast('Área excluída com sucesso!', 'success');
            loadAreas();
        })
        .catch(error => {
            console.error(error);
            showToast('Erro ao excluir a área', 'error');
        });
}

function initAreaSearch() {
    const searchInput = document.getElementById('search-area');
    if (!searchInput) return;
    searchInput.addEventListener('input', function () {
        const searchTerm = this.value.toLowerCase();
        const filtered = areas.filter(area =>
            area.nome.toLowerCase().includes(searchTerm) ||
            (area.descricao && area.descricao.toLowerCase().includes(searchTerm))
        );
        renderAreasTable(filtered);
    });
}

function renderAreasTable(areasToShow) {
    const tableBody = document.querySelector('#areas-tabela tbody');
    tableBody.innerHTML = '';

    if (!areasToShow.length) {
        tableBody.innerHTML = `<tr><td colspan="5" class="text-center">Nenhuma área encontrada.</td></tr>`;
        return;
    }

    const createActionButton = (type, id) => `
        <button class="btn-icon ${type}" data-id="${id}">
            <i class="fas fa-${type === 'edit' ? 'edit' : 'trash-alt'}"></i>
        </button>`;

    const rowsHTML = areasToShow.map(area => `
        <tr>
            <td>${area.id}</td>
            <td>${area.nome}</td>
            <td>${area.descricao || '-'}</td>
            <td>${area.total_estagiarios || 0}</td>
            <td>
                <div class="actions-column">
                    ${createActionButton('edit', area.id)}
                    ${createActionButton('delete', area.id)}
                </div>
            </td>
        </tr>`).join('');

    tableBody.innerHTML = rowsHTML;

    tableBody.querySelectorAll('.btn-icon.edit').forEach(btn => {
        btn.addEventListener('click', () => editArea(+btn.dataset.id));
    });

    tableBody.querySelectorAll('.btn-icon.delete').forEach(btn => {
        btn.addEventListener('click', () => {
            const id = +btn.dataset.id;
            if (confirm('Tem certeza que deseja excluir esta área?')) {
                deleteArea(id);
            }
        });
    });
}


function initTodayPresences() {
    presencasHoje = presencas.filter(p => {
        const dataPresenca = new Date(p.data).toISOString().split('T')[0]; // Converte para o formato YYYY-MM-DD
        return dataPresenca === dataAtual; // Compara com a data atual
    });

    console.log('Presenças de hoje:', presencasHoje); // Depuração
    loadTodayPresencesTable();
}

function loadDashboardStats() {
    document.getElementById('total-estagiarios').textContent = estagiarios.filter(e => e.ativo).length;

    document.getElementById('presentes-hoje').textContent = presencasHoje.length;

    const mesAtual = hoje.getMonth() + 1;
    const anoAtual = hoje.getFullYear();
    const presencasMes = presencas.filter(p => {
        const presencaData = new Date(p.data);
        return presencaData.getMonth() + 1 === mesAtual && presencaData.getFullYear() === anoAtual;
    });
    document.getElementById('presencas-mes').textContent = presencasMes.length;

    let horasTotais = 0;
    presencasMes.forEach(p => {
        if (p.horas) { // Verifica se o campo 'horas' não é null ou undefined
            const [horas, minutos] = p.horas.split(':').map(Number);
            horasTotais += horas + (minutos / 60);
        }
    });
    document.getElementById('horas-mes').textContent = horasTotais.toFixed(1) + 'h';
}

function loadTodayPresencesTable() {
    const tableBody = document.querySelector('#presencas-hoje-tabela tbody');
    tableBody.innerHTML = '';
    
    if (presencasHoje.length === 0) {
        const row = document.createElement('tr');
        row.innerHTML = `<td colspan="4" class="text-center">Nenhuma presença registrada hoje.</td>`;
        tableBody.appendChild(row);
        return;
    }
    
    presencasHoje.forEach(presenca => {
        const estagiario = estagiarios.find(e => e.id === presenca.estagiario_id);
        print // Use 'estagiario_id' aqui
        if (!estagiario) return;
        
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${estagiario.nome}</td>
            <td>${presenca.entrada}</td>
            <td>${presenca.saida || '---'}</td>
            <td>
                <span class="badge ${presenca.saida ? 'inactive' : 'active'}">
                    ${presenca.saida ? 'Finalizado' : 'Em andamento'}
                </span>
            </td>
        `;
        tableBody.appendChild(row);
    });
}


function loadEstagiarios() {
    fetchEstagiarios().then(() => {
        const tableBody = document.querySelector('#estagiarios-tabela tbody');
        tableBody.innerHTML = '';

        estagiarios.forEach(estagiario => {
            const row = document.createElement('tr');
            row.innerHTML = `
                        <td>${estagiario.id}</td>
                        <td>${estagiario.nome}</td>
                        <td>${estagiario.area || 'N/A'}</td>
                        <td>${estagiario.email}</td>
                        <td>${estagiario.telefone}</td>
                        <td>${formatarData(estagiario.data_inicio)}</td>
                        <td>
                            <span class="badge ${estagiario.ativo ? 'active' : 'inactive'}">
                                ${estagiario.ativo ? 'Ativo' : 'Inativo'}
                            </span>
                        </td>
                        <td>
                            <div class="actions-column">
                                <button class="btn-icon edit" data-id="${estagiario.id}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon delete" data-id="${estagiario.id}">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </td>
                    `;    tableBody.appendChild(row);
        });

        // Adicionar eventos para edição e exclusão
        document.querySelectorAll('.btn-icon.edit').forEach(btn => {
            btn.addEventListener('click', function () {
                const id = parseInt(this.getAttribute('data-id'));
                editEstagiario(id);
            });
        });

        document.querySelectorAll('.btn-icon.delete').forEach(btn => {
            btn.addEventListener('click', function () {
                const id = parseInt(this.getAttribute('data-id'));
                if (confirm('Tem certeza que deseja excluir este estagiário?')) {
                    deleteEstagiario(id);
                }
            });
        });
    });
}

function loadAreaSelect(selectId) {
    fetchAreas().then(() => {
        const select = document.getElementById(selectId);
        select.innerHTML = '<option value="">Selecione a área</option>';
        areas.forEach(area => {
            const option = document.createElement('option');
            option.value = area.id;
            option.textContent = area.nome;
            select.appendChild(option);
            console.log(`Adicionando área ao select: ${area.nome}`); // Depuração
        });
    });
 }


function loadPresencasTable(filteredPresencas = null) {
    const tableBody = document.querySelector('#presencas-tabela tbody');
    tableBody.innerHTML = '';

    const presencasToShow = filteredPresencas || presencas;

    console.log('Presenças a serem exibidas:', presencasToShow); // Depuração

    if (presencasToShow.length === 0) {
        const row = document.createElement('tr');
        row.innerHTML = `<td colspan="8" class="text-center">Nenhuma presença encontrada.</td>`;
        tableBody.appendChild(row);
        return;
    }

    presencasToShow.forEach(presenca => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${presenca.id}</td>
            <td>${presenca.estagiario__nome}</td>
            <td>${formatarData(presenca.data)}</td>
            <td>${presenca.entrada}</td>
            <td>${presenca.saida || '---'}</td>
            <td>${presenca.horas || '---'}</td>
            <td>${presenca.observacao || '---'}</td>
        `;
        tableBody.appendChild(row);
    });
}

function loadEstagiarioSelect(selectId, onlyActive = false) {
    fetchEstagiarios().then(() => {
        const select = document.getElementById(selectId);
        select.innerHTML = '<option value="">Selecione o estagiário</option>';

        const filteredEstagiarios = onlyActive ? estagiarios.filter(e => e.ativo) : estagiarios;

        filteredEstagiarios.forEach(estagiario => {
            const option = document.createElement('option');
            option.value = estagiario.id;
            option.textContent = estagiario.nome;
            select.appendChild(option);
        });
    });
}


function loadEstagiarioSelectWithPresence(selectId) {
    const select = document.getElementById(selectId);
    select.innerHTML = '<option value="">Selecione o estagiário</option>';
    
    
    const estagiariosPresentesHoje = presencasHoje
        .filter(p => !p.saida)
        .map(p => p.estagiario_id);
    
    estagiarios
        .filter(e => e.ativo && estagiariosPresentesHoje.includes(e.id))
        .forEach(estagiario => {
            const option = document.createElement('option');
            option.value = estagiario.id;
            option.textContent = estagiario.nome;
            select.appendChild(option);
        });
}


function loadEstagiarioFilter() {
    const select = document.getElementById('filtro-estagiario');
    select.innerHTML = '<option value="">Todos</option>';
    
    estagiarios.forEach(estagiario => {
        const option = document.createElement('option');
        option.value = estagiario.id;
        option.textContent = estagiario.nome;
        select.appendChild(option);
    });
}


function initEventListeners() {
    
    document.getElementById('btn-confirmar-entrada').addEventListener('click', registrarEntrada);
    
    
    document.getElementById('btn-confirmar-saida').addEventListener('click', registrarSaida);
    
    
    document.getElementById('btn-salvar-estagiario').addEventListener('click', salvarEstagiario);
    
    
    document.getElementById('btn-filtrar-presencas').addEventListener('click', filtrarPresencas);
    
    
    document.getElementById('btn-gerar-relatorio').addEventListener('click', gerarRelatorio);
    
   
    document.getElementById('btn-exportar-relatorio').addEventListener('click', exportarRelatorio);
    
    
    document.getElementById('search-estagiario').addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        
        if (searchTerm.length < 2) {
            loadEstagiarios();
            return;
        }
        
        const filteredEstagiarios = estagiarios.filter(estagiario => 
            estagiario.nome.toLowerCase().includes(searchTerm) || 
            estagiario.email.toLowerCase().includes(searchTerm)
        );
        
        const tableBody = document.querySelector('#estagiarios-tabela tbody');
        tableBody.innerHTML = '';
        
        if (filteredEstagiarios.length === 0) {
            const row = document.createElement('tr');
            row.innerHTML = `<td colspan="7" class="text-center">Nenhum estagiário encontrado.</td>`;
            tableBody.appendChild(row);
            return;
        }
        
        // Carrega os estagiários filtrados (código similar ao loadEstagiarios)
        // Implementação omitida para brevidade
    });
    
    
    document.querySelector('[data-page="presencas"]').addEventListener('click', function() {
        loadEstagiarioFilter();
       
        const today = new Date();
        const lastMonth = new Date();
        lastMonth.setMonth(today.getMonth() - 1);
        
        document.getElementById('filtro-data-fim').value = today.toISOString().split('T')[0];
        document.getElementById('filtro-data-inicio').value = lastMonth.toISOString().split('T')[0];
    });
}


function registrarEntrada() {
    const estagiarioId = parseInt(document.getElementById('entrada-estagiario').value);
    const observacao = document.getElementById('entrada-observacao').value;

    if (!estagiarioId) {
        showToast('Por favor, selecione um estagiário', 'error');
        return;
    }

    const jaPresente = presencasHoje.some(p => p.estagiario_id === estagiarioId && !p.saida);
    console.log('Verificando presença:', jaPresente); // Depuração
    if (jaPresente) {
        console.log('Estagiário ja presente hoje!');
        showToast('Este estagiário já está presente hoje!', 'warning');
        return;
    }

    const horaAtual = new Date().toTimeString().split(' ')[0];
    const novaPresenca = {
        estagiarioId: estagiarioId,
        data: dataAtual,
        entrada: horaAtual,
        observacao: observacao
    };

    fetch('/api/presencas/entrada/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(novaPresenca),
    })
        .then(response => {
            if (!response.ok) {
                throw new Error('Erro ao registrar entrada');
            }
            return response.json();
        })
        .then(data => {
            showToast('Entrada registrada com sucesso!', 'success');
            fetchPresencas().then(() => {
                    initTodayPresences();
                    loadTodayPresencesTable();
                    loadPresencasTable();
                    loadDashboardStats();
                }); // Atualiza a tabela
        })
        .catch(error => {
            console.error(error);
            showToast('Erro ao registrar entrada', 'error');
        });

    document.getElementById('modal-registrar-entrada').classList.remove('active');
    document.getElementById('entrada-estagiario').value = '';
    document.getElementById('entrada-observacao').value = '';
}


function registrarSaida() {
    const estagiarioId = parseInt(document.getElementById('saida-estagiario').value);
    const observacao = document.getElementById('saida-observacao').value;

    if (!estagiarioId) {
        showToast('Por favor, selecione um estagiário', 'error');
        return;
    }

    const presenca = presencas.find(p => p.estagiario_id === estagiarioId && !p.saida);
    if (!presenca) {
        showToast('Não foi encontrada entrada aberta para este estagiário', 'error');
        return;
    }

    const horaAtual = new Date().toTimeString().split(' ')[0];
    const horas = calcularHoras(presenca.entrada, horaAtual);

    const dadosSaida = {
        presencaId: presenca.id,
        saida: horaAtual,
        horas: horas,
        observacao: observacao
    };
    fetch('/api/presencas/saida/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(dadosSaida),
    })
        .then(response => {
            if (!response.ok) {
                throw new Error('Erro ao registrar saída');
            }
            return response.json();
        })
        .then(data => {
            showToast('Saída registrada com sucesso!', 'success');
           fetchPresencas().then(() => {
                    initTodayPresences();
                    loadTodayPresencesTable();
                    loadPresencasTable();
                    loadDashboardStats();
                }); // Atualiza a tabela
        })
        .catch(error => {
            console.error(error);
            showToast('Erro ao registrar saída', 'error');
        });

    document.getElementById('modal-registrar-saida').classList.remove('active');
    document.getElementById('saida-estagiario').value = '';
    document.getElementById('saida-observacao').value = '';
}

function editEstagiario(id) {
    const estagiario = estagiarios.find(e => e.id === id);
    if (!estagiario) return;
    
    document.getElementById('modal-estagiario-titulo').textContent = 'Editar Estagiário';
    document.getElementById('estagiario-id').value = estagiario.id;
    document.getElementById('estagiario-nome').value = estagiario.nome;
    document.getElementById('estagiario-email').value = estagiario.email;
    document.getElementById('estagiario-telefone').value = estagiario.telefone;
    
    // Formatar a data para o formato YYYY-MM-DD
    const dataInicioFormatada = new Date(estagiario.data_inicio).toISOString().split('T')[0];
    document.getElementById('estagiario-data-inicio').value = dataInicioFormatada;
    
    document.getElementById('estagiario-ativo').value = estagiario.ativo.toString();
    loadAreaSelect('estagiario-area');
    setTimeout(() => {
        document.getElementById('estagiario-area').value = estagiario.area || estagiario.area_id || '';
    }, 100);
    openModal('modal-estagiario');
}

// Salvar estagiário (novo ou editado)
function salvarEstagiario() {
    const id = document.getElementById('estagiario-id').value;
    const nome = document.getElementById('estagiario-nome').value;
    const area = document.getElementById('estagiario-area').value;
    const email = document.getElementById('estagiario-email').value;
    const telefone = document.getElementById('estagiario-telefone').value;
    const dataInicio = document.getElementById('estagiario-data-inicio').value;
    const ativo = document.getElementById('estagiario-ativo').value === 'true';
    const estagiario = {
        id: id ? parseInt(id) : null,
        nome,   
        area,
        email,
        telefone,
        dataInicio,
        ativo
    };
    
    if (!nome || !email || !telefone || !dataInicio) {
        showToast('Por favor, preencha todos os campos obrigatórios', 'error');
        return;
    }
    
    if (id) {
        
        const index = estagiarios.findIndex(e => e.id === parseInt(id));
        if (index !== -1) {
            estagiarios[index] = {
                id: parseInt(id),
                nome,
                area,
                email,
                telefone,
                dataInicio,
                ativo
            };

        }
    } else {
        // Novo estagiário
        const novoId = estagiarios.length > 0 ? Math.max(...estagiarios.map(e => e.id)) + 1 : 1;
        estagiarios.push({
            id: novoId,
            nome,
            area,
            email,
            telefone,
            dataInicio,
            ativo
        });
            
    }
    
    fetch('/api/estagiarios/create/', {
        method: id ? 'PUT' : 'POST', // PUT para edição, POST para criação
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(estagiario),
    })
        .then(response => {
            if (!response.ok) {
                throw new Error('Erro ao salvar o estagiário');
            }
            return response.json();
        })
        .then(data => {
            showToast(id ? 'Estagiário atualizado com sucesso!' : 'Estagiário cadastrado com sucesso!', 'success');
            document.getElementById('modal-estagiario').classList.remove('active');
            loadEstagiarios(); // Atualizar a lista de estagiários
        })
        .catch(error => {
            console.error(error);
            showToast('Erro ao salvar o estagiário', 'error');
        });
}

function deleteEstagiario(id) {
  
    const temPresencas = presencas.some(p => p.estagiarioId === id);
    
    if (temPresencas) {
        showToast('Não é possível excluir este estagiário pois há presenças registradas', 'error');
        return;
    }
    
    const index = estagiarios.findIndex(e => e.id === id);

    if (index !== -1) {
        estagiarios.splice(index, 1);
        fetchEstagiarios();
        fetch(`/api/estagiarios/${id}/delete/`, {
            method: 'DELETE',
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erro ao excluir o estagiário');
                }
                return response.json();
            })
            .then(data => {
                showToast('Estagiário excluído com sucesso!', 'success');
            })
            .catch(error => {
                console.error(error);
                showToast('Erro ao excluir o estagiário', 'error');
            });
            
        loadEstagiarios();
        loadDashboardStats();
    }
}


function filtrarPresencas() {
    const estagiarioId = document.getElementById('filtro-estagiario').value;
    const dataInicio = document.getElementById('filtro-data-inicio').value;
    const dataFim = document.getElementById('filtro-data-fim').value;
    
    let filtered = [...presencas];
    
    if (estagiarioId) {
        filtered = filtered.filter(p => p.estagiario_id === parseInt(estagiarioId));
    }
    
    if (dataInicio) {
        filtered = filtered.filter(p => p.data >= dataInicio);
    }
    
    if (dataFim) {
        filtered = filtered.filter(p => p.data <= dataFim);
    }
    
    loadPresencasTable(filtered);
}


function gerarRelatorio() {
    const mes = parseInt(document.getElementById('relatorio-mes').value);
    const ano = parseInt(document.getElementById('relatorio-ano').value);
    
    if (!mes || !ano) {
        showToast('Por favor, selecione o mês e o ano', 'error');
        return;
    }
    

    const presencasFiltradas = presencas.filter(p => {
        const presencaData = new Date(p.data);
        return presencaData.getMonth() + 1 === mes && presencaData.getFullYear() === ano;
    });
    
    if (presencasFiltradas.length === 0) {
        showToast('Não há dados para o período selecionado', 'warning');
        return;
    }
    
    
    const totalPresencas = presencasFiltradas.length;
    
    let totalHoras = 0;
    presencasFiltradas.forEach(p => {
        if (p.horas) {
            const [horas, minutos] = p.horas.split(':').map(Number);
            totalHoras += horas + (minutos / 60);
        }
    });
    
    const mediaHoras = totalHoras / totalPresencas;
    
   
    document.getElementById('relatorio-total-presencas').textContent = totalPresencas;
    document.getElementById('relatorio-media-horas').textContent = mediaHoras.toFixed(2) + 'h';
    document.getElementById('relatorio-total-horas').textContent = totalHoras.toFixed(2) + 'h';
    
    
    const relatorioEstagiarios = [];
    
    estagiarios.forEach(estagiario => {
        const presencasEstagiario = presencasFiltradas.filter(p => p.estagiario_id === estagiario.id);
        
        if (presencasEstagiario.length > 0) {
            let horasEstagiario = 0;
            presencasEstagiario.forEach(p => {
                if (p.horas) {
                    const [horas, minutos] = p.horas.split(':').map(Number);
                    horasEstagiario += horas + (minutos / 60);
                }
            });
            
            relatorioEstagiarios.push({
                nome: estagiario.nome,
                totalPresencas: presencasEstagiario.length,
                totalHoras: horasEstagiario.toFixed(2),
                mediaDiaria: (horasEstagiario / presencasEstagiario.length).toFixed(2)
            });
        }
    });
    
    
    const tableBody = document.querySelector('#relatorio-tabela tbody');
    tableBody.innerHTML = '';
    
    relatorioEstagiarios.forEach(rel => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${rel.nome}</td>
            <td>${rel.totalPresencas}</td>
            <td>${rel.totalHoras}h</td>
            <td>${rel.mediaDiaria}h</td>
        `;
        tableBody.appendChild(row);
    });
    
    showToast('Relatório gerado com sucesso!', 'success');
}


function exportarRelatorio() {
    const tableData = document.querySelector('#relatorio-tabela').outerHTML;
    const mesNome = document.querySelector('#relatorio-mes option:checked').textContent;
    const ano = document.getElementById('relatorio-ano').value;
    
    if (!tableData.includes('<tr>')) {
        showToast('Gere um relatório antes de exportar', 'error');
        return;
    }
    
    const blob = new Blob([`
        <html>
            <head>
                <title>Relatório de Estagiários - ${mesNome}/${ano}</title>
                <style>
                    body { font-family: Arial, sans-serif; margin: 20px; }
                    h1 { color: #333; }
                    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
                    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    th { background-color: #f2f2f2; }
                </style>
            </head>
            <body>
                <h1>Relatório de Estagiários - ${mesNome}/${ano}</h1>
                <p>Data de geração: ${new Date().toLocaleDateString()}</p>
                <div>
                    <p><strong>Total de Presenças:</strong> ${document.getElementById('relatorio-total-presencas').textContent}</p>
                    <p><strong>Média de Horas por Dia:</strong> ${document.getElementById('relatorio-media-horas').textContent}</p>
                    <p><strong>Total de Horas:</strong> ${document.getElementById('relatorio-total-horas').textContent}</p>
                </div>
                ${tableData}
            </body>
        </html>
    `], { type: 'text/html' });
    
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = `relatorio-estagiarios-${mesNome}-${ano}.html`;
    link.click();
    
    showToast('Relatório exportado com sucesso!', 'success');
}


function setReportDefaultDate() {
    const mesAtual = hoje.getMonth() + 1;
    const anoAtual = hoje.getFullYear();
    
    document.getElementById('relatorio-mes').value = mesAtual;
    document.getElementById('relatorio-ano').value = anoAtual;
}

function showToast(message, type = 'info') {
    const toastContainer = document.getElementById('toast-container');
    console.log('Exibindo toast:', message, type, toastContainer); // Depuração
    const toast = document.createElement('div');
    toast.classList.add('toast', type);
    
    let icon;
    switch (type) {
        case 'success':
            icon = '<i class="fas fa-check-circle"></i>';
            break;
        case 'error':
            icon = '<i class="fas fa-exclamation-circle"></i>';
            break;
        case 'warning':
            icon = '<i class="fas fa-exclamation-triangle"></i>';
            break;
        default:
            icon = '<i class="fas fa-info-circle"></i>';
    }
    
    toast.innerHTML = `
        <div class="toast-icon">${icon}</div>
        <div class="toast-message">${message}</div>
    `;
    
    toastContainer.appendChild(toast);
    
    setTimeout(() => {
        toast.classList.add('active');
    }, 100);
    
    setTimeout(() => {
        toast.classList.remove('active');
        setTimeout(() => {
            toastContainer.removeChild(toast);
        }, 300);
    }, 3000);
}

function calcularHoras(entrada, saida) {
    const [horaEntrada, minutoEntrada] = entrada.split(':').map(Number);
    const [horaSaida, minutoSaida] = saida.split(':').map(Number);
    
    let totalMinutos = (horaSaida * 60 + minutoSaida) - (horaEntrada * 60 + minutoEntrada);
    
    if (totalMinutos < 0) {
        totalMinutos += 24 * 60;
    }
    
    const horas = Math.floor(totalMinutos / 60);
    const minutos = totalMinutos % 60;
    
    return `${horas}:${minutos.toString().padStart(2, '0')}`;
}

function formatarData(dataString) {
    const data = new Date(dataString);
    const dia = data.getDate().toString().padStart(2, '0');
    const mes = (data.getMonth() + 1).toString().padStart(2, '0');
    const ano = data.getFullYear();
    return `${dia}/${mes}/${ano}`;
}


















  let areaIdParaExcluir = null;
        let areaNomeParaExcluir = null;

       
        function confirmarExclusaoArea(id, nome) {
            areaIdParaExcluir = id;
            areaNomeParaExcluir = nome;
            
            
            document.getElementById('area-nome-exclusao').textContent = nome;
            
            
            document.getElementById('modal-confirmar-exclusao').classList.add('active');
        }

        
        function fecharModalConfirmacao() {
            document.getElementById('modal-confirmar-exclusao').classList.remove('active');
            areaIdParaExcluir = null;
            areaNomeParaExcluir = null;
        }

       
        function executarExclusao() {
            if (areaIdParaExcluir) {
                
                console.log(`Excluindo área ID: ${areaIdParaExcluir}, Nome: ${areaNomeParaExcluir}`);
                
                
                const linha = document.querySelector(`tr:has(td:first-child:contains('${areaIdParaExcluir}'))`);
                if (linha) {
                    linha.remove();
                }
                
                
                mostrarToast('Área excluída com sucesso!', 'success');
                
                
                fecharModalConfirmacao();
            }
        }

       
        function mostrarToast(mensagem, tipo = 'info') {
            const toastContainer = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${tipo}`;
            
            let icone = '';
            switch(tipo) {
                case 'success':
                    icone = 'fas fa-check-circle';
                    break;
                case 'error':
                    icone = 'fas fa-exclamation-circle';
                    break;
                case 'warning':
                    icone = 'fas fa-exclamation-triangle';
                    break;
                default:
                    icone = 'fas fa-info-circle';
            }
            
            toast.innerHTML = `
                <i class="${icone}"></i>
                <span>${mensagem}</span>
            `;
            
            toastContainer.appendChild(toast);
            
           
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 3000);
        }

       
        document.addEventListener('DOMContentLoaded', function() {
           
            document.getElementById('btn-confirmar-exclusao').addEventListener('click', executarExclusao);

          
            document.getElementById('modal-confirmar-exclusao').addEventListener('click', function(e) {
                if (e.target === this) {
                    fecharModalConfirmacao();
                }
            });

           
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('modal-confirmar-exclusao').classList.contains('active')) {
                    fecharModalConfirmacao();
                }
            });

           
            const sidebarItems = document.querySelectorAll('.sidebar nav ul li[data-page]');
            const pages = document.querySelectorAll('.page');

            sidebarItems.forEach(item => {
                item.addEventListener('click', function() {
                    const pageId = this.getAttribute('data-page');
                   
                    sidebarItems.forEach(i => i.classList.remove('active'));
                  
                    this.classList.add('active');
                    
                    
                    pages.forEach(page => page.classList.remove('active'));
                    
                    const targetPage = document.getElementById(pageId);
                    if (targetPage) {
                        targetPage.classList.add('active');
                    }
                });
            });

            
            const hoje = new Date();
            const opcoes = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            };
            document.getElementById('today-date').textContent = hoje.toLocaleDateString('pt-BR', opcoes);
        });
  
</script>
</body>
</html>